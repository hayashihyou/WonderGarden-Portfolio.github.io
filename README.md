# Wonder-Garden

![alt text](image-2.png)

> ### 河原電子ビジネス専門学校 ゲームクリエイター科
> ### 林　彪
>
> ### GitHub URL ： https://github.com/hayashihyou/Wonder-Garden


# 目次
- [作品概要](#作品概要)
- [操作説明](#操作説明)
- [ゲーム説明](#ゲーム説明)
- [ギミックについて](#ギミックについて)
  - [土管について](#土管について)
  - [大砲について](#大砲について)
- [技術紹介](#技術紹介)
  - [ステートパターンについて](#ステートパターンについて)
  - [マネージャークラスについて](#マネージャークラスについて)
  - [ボスのHPバーについて](#ボスのHPバーについて)
  - [ボス戦の演出について](#ボス戦の演出について)
  - [トゥーンシェーダーについて](#トゥーンシェーダーについて)

<br />


# 作品概要
  <dl>
    <dt>タイトル : WonderGarden</dt>
    <dt>制作人数 : 1人</dt>
    <dt>ゲームジャンル : 3Dアクションゲーム</dt>
    <dt>プレイ人数 : 1人</dt>
    <dt>使用言語 : C++,HLSL</dt>
    <dt>開発環境 : 学内エンジン,Windows11</dt>  
  </dl>
<br />

# 操作説明
>### <dt>Aボタン：ジャンプ</dt>
>### <dt>Bボタン：決定キー/攻撃(パンチ)</dt>
>### <dt>Xボタン：ダッシュ</dt>
>### <dt>Lスティック,十字キー：移動</dt>
>### <dt>Rスティック：カメラ移動</dt>
> ![alt text](Xbox.png)
# ゲーム説明
### 敵を倒しつつボスのいる場所まで向かいボスを倒そう！！
![alt text](image.png)
<br />

# ギミックについて
### 今回2点ほどステージギミックを用意しました。
### ・土管
![alt text](<スクリーンショット 2025-12-26 011613.png>)
### ・大砲
![alt text](image-1.png)
### の2点です。

## 土管について
> ### 土管の中に判定を付けることでプレイヤーが土管の中にくぐった際にもう一つのつなげた土管の方に移動することができます。
>![alt text](土管-1.gif)

### 土管をくぐった時にプレイヤーの位置を変更、更新しますがこの時カメラをプレイヤーの位置に合わせて更新しないといけません。カメラがプレイヤーの位置を見失い、画面ではプレイヤーの移動後のカメラが反映されてないままになります。
<br />

## 大砲について
>### プレイヤー大砲に近づく大砲の中に入り設定している向きと初速の勢いを持って発射し、重力で少しずつ勢いを落としていくことで放物線を描くような飛び方ができました。
>![alt text](大砲.gif)

### 大砲の周りに当たり判定を付けており、判定に触れると大砲の中に入るようになっています。大砲の中に入っている間はプレイヤーに大砲に入っている状態を設け移動や攻撃の入力を弾く様にしています。
<br  />

# 技術紹介
### 今回紹介する技術は5点ほどあります。
### ・ステートパターンについて
### ・マネージャークラスについて
### ・ボスのHPUIについて
### ・ボス戦の演出について
### ・トゥーンシェーダーについて

<br />

## ステートパターンについて
>### 今まででは、Update関数の中で状態遷移を行っていたのですが新しい状態を追加していく度に条件分岐が増えてしまいエラーの原因にはつながってしまいました。
>![alt text](image-3.png)

> ### ステートパターンを実装したことで新しくステートパターン用のクラスを用意することで状態遷移時の処理分が書きやすくなり、新しい条件を追加したい時は新しいクラス名を追加するだけで良いので、コードの保守性や状態遷移時のバグを抑制できました。
>![alt text](image-4.png)
<br />

## マネージャークラスについて
>### 攻撃判定を管理するマネージャークラスを作りました。プレイヤーと敵は共通の当たる判定を持っていた為、敵同士の攻撃でやられていました。そこで、マネージャークラスを実装したことで攻撃判定時に”誰が”攻撃したかをわかるようにしました。よって、敵同士の当たり判定でやられることをなくすことができました。
> ![alt text](image-5.png)
<br />

## ボスのHPUIについて
>### HPバーは2種類作りました。現在HPを示す緑のバーと現在HPが減った分を追従して減らす赤のバーがあります。HPが減少時、緑のバーは即時に消えますが赤のバーが減った分のHPを追従することでダメージの余韻と手応えを感じるようにして、クオリティアップにもなりました。
![alt text](HPバー.gif)
<br />

## ボス戦の演出について
>### ボス戦に入った時に演出がないとボス戦なのか伝わりづらいと思い実装しました。黒帯とボスのテクスチャを用意することで迫力と没入感を高めました。線形補間を用いて一定の数値で黒帯やテクスチャを点滅することでボス戦前のムービー感を出すことができました。
>![alt text](ボスの演出.gif)
<br />

## トゥーンシェーダーについて

### 影がパキっとしていて、光の当たり方次第で色がはっきりと変わりアニメ調に見せたい為、トゥーンシェーダーを実装しました。

>### トゥーンシェーダー入れる前
>![alt text](<スクリーンショット 2025-12-26 093902-1.png>)

>### トゥーンシェーダーを入れた後
>![alt text](<スクリーンショット 2025-12-26 093800-1.png>)

### 少しわかりづらいですが赤く丸で囲っているプレイヤーの帽子の影がくっきり入っているのが違いとなっています。